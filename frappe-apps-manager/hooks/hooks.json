{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash|Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "if [ -f 'sites/common_site_config.json' ]; then echo 'âœ“ Frappe bench detected'; else echo 'âš  Not in Frappe bench directory'; fi"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.tool_input.file_path' | { read file_path; if [[ \"$file_path\" == *test_*.py ]]; then if [[ \"$file_path\" != */doctype/* ]] && [[ \"$file_path\" != */tests/* ]]; then echo 'âš  Test files should be in doctype/ or tests/ directory'; fi; fi; }"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.tool_input.file_path' | { read file_path; if [[ \"$file_path\" == *.json ]] && [[ \"$file_path\" == */doctype/* ]]; then echo 'ðŸ’¡ Reminder: Run migrations with /frappe-migrate'; fi; }"
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.tool_input.file_path' | { read file_path; if [[ \"$file_path\" == *.py ]] && [[ \"$file_path\" == */doctype/*.py ]] && [[ \"$file_path\" != *test_*.py ]]; then echo 'âœ“ Code updated. Consider running tests with /frappe-test'; fi; }"
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.tool_input.file_path' | { read file_path; if [[ \"$file_path\" == *.js ]] && [[ \"$file_path\" == */doctype/*.js ]]; then echo 'ðŸ’¡ Reminder: Clear cache with /frappe-cache for JS changes to take effect'; fi; }"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": "",
        "keywords": ["frappe", "bench", "doctype", "migrate"],
        "hooks": [
          {
            "type": "command",
            "command": "echo 'ðŸ” Checking Frappe bench setup...'; if [ -f 'sites/common_site_config.json' ]; then echo 'âœ“ Valid bench directory'; bench --version 2>/dev/null || echo 'âš  Bench command not found'; else echo 'âŒ Not a Frappe bench directory'; fi"
          }
        ]
      },
      {
        "matcher": "",
        "keywords": ["site", "test", "migrate", "backup", "console"],
        "hooks": [
          {
            "type": "command",
            "command": "if [ -f 'sites/common_site_config.json' ]; then site_count=$(ls -d sites/*/ 2>/dev/null | wc -l); if [ $site_count -gt 0 ]; then echo \"âœ“ Found $site_count site(s)\"; else echo 'âš  No sites found. Create one with /frappe-new-site'; fi; fi"
          }
        ]
      },
      {
        "matcher": "",
        "keywords": ["cache", "redis", "clear cache"],
        "hooks": [
          {
            "type": "command",
            "command": "if command -v redis-cli >/dev/null 2>&1; then if redis-cli ping >/dev/null 2>&1; then echo 'âœ“ Redis is running'; else echo 'âš  Redis is not responding. Start with: sudo systemctl start redis-server'; fi; fi"
          }
        ]
      }
    ]
  }
}
